<!DOCTYPE html>
<html>
  <head>
    <title>p5.play onMousePressed</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <script src="./p5.play.js"></script>
    <script src="./p5.sound.min.js"></script>
  </head>
  <body>
    <script>
      let bubble;
      let bubble_ss;
      let bubble_animate;
      let slap1;
      let shadow;
      let shadow_ss;
      let shadow_animate;
      function preload() {
        bubble_ss = loadSpriteSheet(
          "https://cdn.glitch.com/dc122c87-3702-4e86-8f63-eea043d864ca%2Fezgif-6-54b25e0a96a3.png?v=1628769250046",
          100,
          100,
          10
        );
        slap1 = loadSound(
          "https://cdn.glitch.com/73b7268a-e651-4500-99a6-ec6cf90c5120%2F429722__fellur__slap1.wav?v=1629075190344"
        );
        shadow_ss = loadSpriteSheet(
          "https://cdn.glitch.com/044695de-e559-42ff-9a3f-6d480aac438b%2Fshadow-80x70.png?v=1628750728297",
          80,
          70,
          20
        );
      }
      function setup() {
        createCanvas(400, 400);

        bubble_animate = loadAnimation(bubble_ss);
        bubble = createSprite(100, 100, 45, 66);
        bubble.addAnimation("normal", bubble_animate);
        slap1.playMode("untilDone"); //sustain （重叠）, restart, untilDone
        shadow = createSprite(200, 200, 80, 70);
        shadow_animate = loadAnimation(shadow_ss);
        shadow.debug = true;
        shadow_animate.stop();
        shadow.draw = function() {
          animation(shadow_animate, 0, 0);
        };
        /*
        https://molleindustria.github.io/p5.play/examples/index.html?fileName=mouseEvents.js
        https://molleindustria.github.io/p5.play/docs/classes/Sprite.html
        */
        shadow.onMousePressed = function() {
          //onMouseReleased, onMouseOut, onMouseOver
          shadow_animate.play();
        };
      }

      function draw() {
        background("Lavender");

        if (keyDown("a") || keyDown("s") || keyDown("d") || keyDown("w")) {
          slap1.play();
        }

        if (keyDown("d")) {
          bubble.position.x += 3;
        }
        if (keyDown("a")) {
          bubble.position.x -= 3;
        }
        if (keyDown("s")) {
          bubble.position.y += 3;
        }
        if (keyDown("w")) {
          bubble.position.y -= 3;
        }

        drawSprites();
      }
    </script>
    <pre>
      https://ezgif.com/gif-to-sprite
    </pre>
  </body>
</html>
