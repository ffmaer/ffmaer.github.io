(this["webpackJsonpcomputer-art-timeline"]=this["webpackJsonpcomputer-art-timeline"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(1),r=n.n(a),i=n(13),o=n.n(i),c=(n(21),n(3)),l=(n(22),n(15)),u=n(14),j=n(7),g=n(8),b=n(10),d=n(9),p=n(2),h=n.n(p),m=n(4),f=n(12),O={origin:window.location.origin},x=(n(24),function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).submitHandler=function(){var e=Object(m.a)(h.a.mark((function e(t){var n,s,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.createBody(),e.next=4,fetch(O.origin+"/people/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:if(200!==(s=e.sent).status){e.next=12;break}return e.next=8,s.json();case 8:a=e.sent,(r=n).id=a.id,this.props.addNewPersonToTimeline(r);case 12:console.log(s.status);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.state={born_year:"",name:"",tags:{}},s}return Object(g.a)(n,[{key:"createBody",value:function(){var e=Object(f.a)({},this.state),t=[];for(var n in e.tags)!0===e.tags[n]&&t.push(n);return e.tags=t.join(","),e.username=localStorage.getItem("username"),e.token=localStorage.getItem("token"),e}},{key:"selectTags",value:function(){var e=this,t=Object.values(this.props.tagInfo);return Object(s.jsx)("div",{children:t.map((function(t,n){return Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{name:t.tag,id:t.tag,type:"checkbox",onChange:function(n){var s=Object(f.a)({},e.state.tags);s[t.tag]=n.target.checked,e.setState({tags:s})}}),Object(s.jsx)("label",{htmlFor:t.tag,title:t.desc,children:t.tag})]},n)}))})}},{key:"render",value:function(){var e=this;return this.props.login?Object(s.jsxs)("form",{onSubmit:this.submitHandler.bind(this),className:"new-person",children:[Object(s.jsx)("span",{children:"\u251c "}),Object(s.jsx)("input",{type:"text",name:"born_year",value:this.state.born_year,onChange:function(t){return e.setState({born_year:t.target.value})},required:"required",size:"4",maxLength:"4",pattern:"[0-9]{4}",title:"year of birth, e.g. 1910",placeholder:"1910"}),Object(s.jsx)("input",{type:"text",name:"name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},required:"required",size:"16",title:"name",placeholder:"name"}),Object(s.jsx)("br",{}),this.selectTags(),Object(s.jsx)("input",{type:"submit"})]}):null}}]),n}(r.a.Component));n(25);function v(e){var t=function(){var t=Object(m.a)(h.a.mark((function t(n){var s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Remove ".concat(e.name,"?"))){t.next=7;break}return s={id:n.target.dataset.id,username:localStorage.getItem("username"),token:localStorage.getItem("token")},t.next=5,fetch(O.origin+"/people/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 5:200===t.sent.status&&e.deletePerson(n.target.dataset.id);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return e.login?Object(s.jsx)("button",{className:"delete-button",onClick:t,"data-id":e.id,title:e.name,children:"x"}):null}function y(e){return Object(s.jsx)("a",{className:"name",href:"https://www.bing.com/search?q="+e.person.name,target:"_blank",rel:"noreferrer",children:e.person.name})}function k(e){return Object(s.jsx)("span",{className:"tag",children:e.tags.split(",").map((function(t,n){if(!e.tagInfo.hasOwnProperty(t))return null;var a=e.tagInfo[t];return Object(s.jsx)("a",{rel:"noreferrer",target:"_blank",href:a.source,title:a.desc,style:{color:a.color},children:"\u2b24"},n)}))})}function S(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{children:"\u251c "}),Object(s.jsx)("span",{className:"timeline",children:e.person.born_year}),"\xa0",Object(s.jsx)(y,{person:e.person}),Object(s.jsx)(v,{name:e.person.name,id:e.person.id,deletePerson:e.deletePerson,login:e.login}),Object(s.jsx)(k,{tags:e.person.tags,tagInfo:e.tagInfo})]},e.index)}function w(e){return Object(s.jsxs)("div",{className:"page-title",children:["Computer Art",Object(s.jsx)("br",{}),"Timeline"]})}var T=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).state={people:[],tagInfo:{}},s}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(h.a.mark((function e(){var t,n,s,a,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.origin+"/people",{method:"GET"});case 3:return e.next=5,e.sent.json();case 5:return t=e.sent,e.next=8,fetch(O.origin+"/tags",{method:"GET"});case 8:return e.next=10,e.sent.json();case 10:n=e.sent,s={},a=Object(u.a)(n);try{for(a.s();!(r=a.n()).done;)i=r.value,s[i.tag]=i}catch(o){a.e(o)}finally{a.f()}this.setState({people:t,tagInfo:s}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"addNewPersonToTimeline",value:function(e){this.setState({people:[].concat(Object(l.a)(this.state.people),[e])})}},{key:"deletePerson",value:function(e){this.setState({people:this.state.people.filter((function(t){return t.id!==parseInt(e)}))})}},{key:"render",value:function(){var e=this;return this.props.timeline?Object(s.jsxs)("div",{children:[Object(s.jsx)(w,{}),this.state.people.map((function(t,n){return Object(s.jsx)(S,{tagInfo:e.state.tagInfo,person:t,deletePerson:e.deletePerson.bind(e),login:e.props.login},n)})),Object(s.jsx)(x,{tagInfo:this.state.tagInfo,addNewPersonToTimeline:this.addNewPersonToTimeline.bind(this),login:this.props.login})]}):null}}]),n}(r.a.Component);n(26);var N=function(e){var t,n=Object(a.useState)(""),r=Object(c.a)(n,2),i=r[0],o=r[1],l=Object(a.useState)(""),u=Object(c.a)(l,2),j=u[0],g=u[1],b=Object(a.useState)(""),d=Object(c.a)(b,2),p=d[0],f=d[1],x=function(){var e=Object(m.a)(h.a.mark((function e(n){var s,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s={name:j,suggestion:i},e.next=4,fetch(O.origin+"/suggestions/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 4:a=e.sent,console.log(a.status),200===a.status?(f("Your suggestion is recorded!"),g("")):(f("Something was not right."),clearTimeout(t),t=setTimeout((function(){f("")}),1e4));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.suggest?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"page-title",children:"Make a Suggestion"}),Object(s.jsxs)("form",{onSubmit:x,children:[Object(s.jsx)("label",{htmlFor:"suggest-suggestion",className:"suggestion-label",children:"Please suggest someone, a list of people or maybe a link where we can find a list of people."}),Object(s.jsx)("br",{}),Object(s.jsx)("textarea",{value:i,name:"suggestion",id:"suggest-suggestion",placeholder:"",rows:"15",className:"suggest-form-element",onChange:function(e){o(e.target.value)},required:!0}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"suggest-name",children:"Your (nick)name"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{value:j,id:"suggest-name",type:"text",placeholder:"So that we can thank you for your suggestion.",className:"suggest-form-element",onChange:function(e){g(e.target.value)},required:!0}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"submit"}),Object(s.jsx)("div",{children:p})]})]}):null};n(27);var P=function(e){var t,n=Object(a.useState)(""),r=Object(c.a)(n,2),i=r[0],o=r[1],l=Object(a.useState)(""),u=Object(c.a)(l,2),j=u[0],g=u[1],b=Object(a.useState)(""),d=Object(c.a)(b,2),p=d[0],f=d[1],x=function(){var n=Object(m.a)(h.a.mark((function n(s){var a,r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.preventDefault(),a={username:i,password:j},n.next=4,fetch(O.origin+"/users/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if(200!==(r=n.sent).status){n.next=12;break}return n.next=8,r.json();case 8:(r=n.sent).not_found?(f("Please check the username and password."),clearTimeout(t),t=setTimeout((function(){f("")}),1e4)):(localStorage.setItem("token",r.token),localStorage.setItem("username",r.username),e.setLogin(!0),e.setPage("timeline")),n.next=17;break;case 12:if(400!==r.status){n.next=17;break}return n.next=15,r.json();case 15:r=n.sent,console.log(r.error);case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return e.login?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"page-title",children:"Login"}),Object(s.jsxs)("form",{onSubmit:x,children:[Object(s.jsx)("label",{children:"Username"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{value:i,className:"login-form-element",required:!0,onChange:function(e){o(e.target.value)}}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{value:j,className:"login-form-element",type:"password",required:!0,onChange:function(e){g(e.target.value)}}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"submit"}),Object(s.jsx)("div",{children:p})]})]}):null};function C(e){return Object(s.jsxs)("div",{id:"top-bar",children:[Object(s.jsx)("div",{className:"app-title",children:Object(s.jsx)("div",{children:"Computer Art Timeline"})}),Object(s.jsx)("div",{className:"timeline",children:Object(s.jsx)("button",{onClick:function(t){e.setPage("timeline")},children:"timeline"})}),Object(s.jsx)("div",{className:"suggest",children:Object(s.jsx)("button",{onClick:function(t){e.setPage("suggest")},children:"suggest"})}),Object(s.jsxs)("div",{className:"login-logout",children:[!e.login&&Object(s.jsx)("button",{onClick:function(t){e.setPage("login")},children:"login"}),e.login&&Object(s.jsx)("button",{onClick:function(t){e.setLogin(!1),localStorage.clear()},children:"logout"})]})]})}var I=function(){var e=Object(a.useState)("timeline"),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(null!==localStorage.getItem("username")),o=Object(c.a)(i,2),l=o[0],u=o[1];return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(C,{setPage:r,setLogin:u,login:l}),Object(s.jsx)("div",{id:"main",children:Object(s.jsxs)("div",{children:[Object(s.jsx)(P,{login:"login"===n,setLogin:u,setPage:r}),Object(s.jsx)(N,{suggest:"suggest"===n}),Object(s.jsx)(T,{timeline:"timeline"===n,login:l})]})})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),r(e),i(e)}))};o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(I,{})}),document.getElementById("root")),q()}},[[28,1,2]]]);
//# sourceMappingURL=main.cc7689b8.chunk.js.map