<!DOCTYPE html>
<html>
  <head>
    <title>p5.play background</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <script src="./p5.play.js"></script>
  </head>
  <body>
    <script>
      let disciple;
      let disciple_ss;
      let disciple_animate;
      let minion;
      let minion_ss;
      let minion_animate;
      let background
      function preload() {
        disciple_ss = loadSpriteSheet(
          "https://cdn.glitch.com/044695de-e559-42ff-9a3f-6d480aac438b%2Fdisciple-45x51.png?v=1628750727750",
          45,
          51,
          11
        );
        minion_ss = loadSpriteSheet(
          "https://cdn.glitch.com/044695de-e559-42ff-9a3f-6d480aac438b%2Fminion-45x66.png?v=1628750728522",
          45,
          66,
          6
        );
        background = loadImage("https://cdn.glitch.com/f1591127-b0c8-45ca-8f30-54053c1c6ac7%2Ftaylor-van-riper-yQorCngxzwI-unsplash.jpg?v=1628766957562")
      }
      function setup() {
        createCanvas(400, 400);
        disciple_animate = loadAnimation(disciple_ss);
        disciple_animate.looping = false;
        disciple_animate.stop();
        disciple = createSprite(200, 200, 45, 51);
        disciple.setCollider("rectangle", -5, 0, 30, 51);
        disciple.draw = function() {
          // rect(-5,15,30,20)
          // rect(-5,0,30,51)
          animation(disciple_animate, 0, 0);
        };

        minion_animate = loadAnimation(minion_ss);
        minion = createSprite(100, 100, 45, 66);
        minion.draw = function() {
          animation(minion_animate, 0, 0);
        };
        minion.setCollider("circle", 0, 0, 22);
      }

      function draw() {
        image(background,0,0);

        if (keyDown(68) || keyDown(RIGHT_ARROW)) {
          minion.position.x += 3;
        }
        if (keyDown(65) || keyDown(LEFT_ARROW)) {
          minion.position.x -= 3;
        }
        if (keyDown(83) || keyDown(DOWN_ARROW)) {
          minion.position.y += 3;
        }
        if (keyDown(87) || keyDown(UP_ARROW)) {
          minion.position.y -= 3;
        }

        minion.collide(disciple, function() {
          disciple_animate.play();
          disciple.setCollider("rectangle", 0, 20, 45, 20);
        });

        drawSprites();
      }
    </script>
    <pre>
      Copyright/Attribution Notice:
      
      Attibution to Stephen Challener (Redshrike) for the original sprites and a link to OpenGameArt.org
      
      https://opengameart.org/content/bosses-and-monsters-spritesheets-ars-notoria
    </pre>
  </body>
</html>
